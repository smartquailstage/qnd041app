{% extends "saas_shop/base3.html" %}
{% load i18n %}
{% load static %}

{% block title %}
  {% trans "Checkout" %}
{% endblock %}

{% block content %}


<style>
  .step-count-circle {
  background-color: #b50f15; /* o el color corporativo que uses */
  color: #fff;
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: 600;
  margin-right: 8px;
  font-size: 14px;
}

</style>

<div class="page-content-wrapper">
          <!-- start page content-->
         <div class="page-content">


<div class="product-more-info mt-4">



<div class="card">
  <div class="card-body p-4" style="color: #ededed;
    text-align: justify;
    font-family: 'Segoe UI', sans-serif;
    font-size: 14px;
    line-height: 1.2;
    background-color: #403c3c;
    border-radius: 25px;">

    <!-- Tabs -->
    <ul class="nav nav-tabs mb-3" role="tablist">
      <li class="nav-item " role="presentation">
        <a class="nav-link active " id="tab-terms" data-bs-toggle="tab" href="#terms" role="tab" aria-controls="terms" aria-selected="false">
          <div class="d-flex align-items-center">
            <div class="tab-title text-uppercase fw-500">Términos y políticas de compra</div>
          </div>
        </a>
      </li>
    </ul>

    <!-- Contenido de las Tabs -->
    <div class="tab-content pt-3">
      <!-- TAB 2: TÉRMINOS Y POLÍTICAS -->
      <div class="tab-pane active show fade" id="terms" role="tabpanel" aria-labelledby="tab-terms">
        <div class="card bg-transparent border-0">
          <div class="card-body p-4" style="color: #ededed; text-align: justify; font-family: 'Segoe UI', sans-serif; font-size: 14px; line-height: 1.5; background-color: #403c3c; border-radius: 15px;">

            <h5 class="text-uppercase text-center mb-4">Términos y Condiciones de Compra</h5>

            <p>Los siguientes <strong>Términos y Condiciones</strong> regulan la adquisición, desarrollo, implementación y uso de soluciones tecnológicas, software, servicios en la nube y consultoría especializada ofrecidos por <strong>SmartQuail, Inc.</strong> En la Republica del Ecuador.</p>

            <p><strong>2. Proceso de compra y creación del proyecto</strong></p>
            <p>La compra solo se considera completada tras iniciar la etapa de Investigación y Desarrollo (I+D). Antes de esto, el cliente puede solicitar la devolución total del valor pagado.</p>

            <p><strong>3. Inicio del proceso de I+D</strong></p>
            <p>Una vez iniciado el proceso de I+D, no se aceptarán devoluciones debido a los costos técnicos y operativos generados.</p>

            <p><strong>4. Servicios en la nube</strong></p>
            <p>El primer mes de uso de la nube es gratuito; luego, se aplican las tarifas del plan contratado. SmartQuail podrá ajustar costos previo aviso.</p>

            <p><strong>5. Desarrollo basado en tecnología Open Source</strong></p>
            <p>El desarrollo de software se realiza sobre bases de <strong>código abierto (Open Source)</strong>, con transparencia y flexibilidad. Cada proyecto se ejecuta conforme a <strong>horas pactadas</strong>; si la implementación requiere tiempo adicional, se generarán <strong>costos adicionales</strong> acordados con las partes.</p>

                  <p><strong>6. Tiempos de consultoría e investigación</strong></p>
      <p>
        Los tiempos de consultoría, análisis y desarrollo I+D serán los fijados en cada plan o propuesta. Si se requiere más tiempo del establecido, el cambio deberá ser <strong>acordado mutuamente</strong> entre SmartQuail y el Usuario.
      </p>

<p><strong>7. Protección de datos personales y derechos humanos</strong></p>
<p>
  SmartQuail, Inc. cumple con la <strong>Ley Orgánica de Protección de Datos Personales del Ecuador</strong> y con los principios internacionales de respeto a los derechos humanos, privacidad digital y seguridad de la información.
  No se desarrollarán, automatizarán ni implementarán procesos que dañen o perjudiquen los derechos de titulares de datos o terceros.
</p>

<p>
  Asimismo, SmartQuail, Inc. <strong>no almacena, procesa, desencripta ni tiene acceso directo a información sensible de sus usuarios</strong>, incluyendo datos bancarios, números de tarjetas de crédito, códigos de seguridad (CVV) o contraseñas financieras.
</p>

<p>
  Los pagos realizados por el Usuario se procesan exclusivamente mediante <strong>pasarelas de pago certificadas y externas</strong>, las cuales cumplen con estándares internacionales de seguridad como <strong>PCI-DSS (Payment Card Industry Data Security Standard)</strong>.
  SmartQuail únicamente recibe la confirmación del pago por parte del proveedor externo, sin acceder al contenido específico de la transacción.
</p>

<p>
  En consecuencia, SmartQuail no registra, almacena ni conserva ninguna información financiera sensible en sus servidores, bases de datos o sistemas internos. Todo procesamiento, cifrado y validación del pago se realiza de forma directa y segura por la entidad autorizada correspondiente.
</p>

<p>
  Sin perjuicio de lo anterior, SmartQuail, Inc. <strong>sí mantiene la trazabilidad de la transacción</strong> —como número de orden, referencia emitida por la pasarela, fecha, hora, estado del pago y dirección IP— exclusivamente para fines de <strong>seguridad, auditoría, prevención de fraudes, validación operativa y soporte al Usuario</strong>.  
  Esta información no contiene datos financieros sensibles y se maneja bajo estrictos protocolos de protección, controles de acceso y cumplimiento normativo.
</p>

<p>
  Asimismo, <strong>no se implementarán ni automatizarán procesos relacionados con actividades delictivas</strong>, incluyendo:
</p>
<ul>
  <li>Fraude financiero o bancario</li>
  <li>Suplantación de identidad o acceso no autorizado a sistemas</li>
  <li>Distribución de software malicioso (malware, ransomware, spyware, etc.)</li>
  <li>Lavado de activos o financiamiento del terrorismo</li>
  <li>Actividades contrarias a la ley, el orden público o la moral</li>
</ul>


      <p><strong>8. Encargado del tratamiento de datos personales</strong></p>
      <p>
        Por la compra de una solución tecnológica de SmartQuail, el Usuario acepta que <strong>SmartQuail, Inc.</strong> actuará como <strong>encargado del tratamiento de datos personales</strong> mientras el sistema permanezca alojado en nubes físicas o centros de datos administrados por SmartQuail.
        El Usuario mantiene en todo momento la <strong>titularidad de los datos</strong> y podrá ejercer sus derechos conforme a la normativa vigente.
      </p>

            <p><strong>9. Protección de datos personales</strong></p>
            <p>SmartQuail cumple con la Ley Orgánica de Protección de Datos Personales del Ecuador. El usuario conserva la titularidad de los datos alojados en servidores administrados por SmartQuail.</p>

            <p><strong>10. Legislación y jurisdicción</strong></p>
            <p>Estos términos se rigen por las leyes de la República del Ecuador. Cualquier controversia será resuelta por los tribunales del Distrito Metropolitano de Quito.</p>

<form method="post" action="{% url 'saas_orders:accept_terms' %}">
    {% csrf_token %}
    <div class="form-check">
        {{ form.terms_accepted }}
        <label class="form-check-label" for="{{ form.terms_accepted.id_for_label }}">
            He leído y acepto los términos y condiciones
        </label>
    </div>

    {% if form.terms_accepted.errors %}
    <div class="text-danger mt-1">
        {{ form.terms_accepted.errors }}
    </div>
    {% endif %}

    <button type="submit" class="btn btn-primary mt-3">
        Continuar al formulario de orden
    </button>
</form>





            <p class="mt-4 text-center"><strong>SmartQuail, Inc. — Transformando ideas en innovación segura.</strong></p>
            <p class="text-center mb-0">© 2025 Todos los derechos reservados.</p>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>



    </div>


      </div>
  </div>




<!-- JS para habilitar/deshabilitar el botón -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const checkbox = document.getElementById("id_terms_accepted"); // Django genera este id automáticamente
    const submitBtn = document.getElementById("submit-order");

    // Función para actualizar el estado del botón
    function toggleSubmit() {
        submitBtn.disabled = !checkbox.checked;
    }

    // Inicializar el estado al cargar
    toggleSubmit();

    // Escuchar cambios en el checkbox
    checkbox.addEventListener("change", toggleSubmit);
});
</script>

{% endblock %}



     <div class="page-content-wrapper">
          <!-- start page content-->
         <div class="page-content">




          <!--start shop cart-->
          <section class="shop-page">
            <div class="shop-container">
              <div class="card shadow-sm border-0">
                <div class="card-body">
						<div class="shop-cart">
							<div class="row">
								<div class="col-12 col-xl-8">
									<div class="checkout-details">
										<div class="card border-0">
											<div class="card-body">
												<div class="steps steps-light">
													<a class="step-item active" href="{% url 'saas_cart:cart_detail' %}">
														<div class="step-progress"><span class="step-count">1</span>
														</div>
														<div class="step-label"><i class='bx bx-cart'></i></div>
													</a>
													<a class="step-item active current" href="{% url 'saas_orders:order_create' %}">
														<div class="step-progress"><span class="step-count">2</span>
														</div>
														<div class="step-label"><i class='bx bx-user-circle'></i></div>
													</a>
													<a class="step-item" href="#">
														<div class="step-progress"><span class="step-count">3</span>
														</div>
														<div class="step-label"><i class='bx bx-credit-card'></i></div>
													</a>
													<a class="step-item" href="#">
														<div class="step-progress"><span class="step-count">4</span>
														</div>
														<div class="step-label"><i class='bx bx-check-circle'></i></div>
													</a>
												</div>
											</div>
										</div>
										<div class="card">
											<div class="card-body">
												<div class="d-flex align-items-center mb-3">
													<div class="">
														<img src="assets/images/avatars/06.png" width="80" alt="" class="rounded-circle p-1 shadow-sm">
													</div>
													<div class="ms-3">
														<h6 class="mb-0">{{ order.first_name  }} {{order.last_name }}</h6>
														<p class="mb-0">{{ order.email }} </p>
													</div>
												</div>
                        <hr>
												<div class="">
													<h2 class="h5 mb-0">Datos de Facturación</h2>
													<div class="my-3 border-bottom"></div>
<div class="form-body">
  <form action="." method="post" class="order-form row g-3">
    
    {% csrf_token %}
    
    <!-- RUC -->
    <div class="col-md-6">
      <label class="form-label" for="{{ form.ruc.id_for_label }}">R.U.C / C.I</label>
      {{ form.ruc }}
    </div>

    <!-- Razon Social -->
    <div class="col-md-6">
      <label class="form-label" for="{{ form.razon_social.id_for_label }}">Nombre de la Organización,Negocio o Marca</label>
      {{ form.razon_social }}
    </div>

    <!-- Sector -->
    <div class="col-md-6">
      <label class="form-label" for="{{ form.sector.id_for_label }}">Sector de Negocios</label>
      {{ form.sector }}
    </div>

    <!-- Teléfono -->
  <div class="input-group">
    <span class="input-group-text">+593</span>
    {{ form.telefono }}
  </div>

  <!-- Texto explicativo -->
  <small class="form-text text-muted">
    Escriba el número en formato internacional. Ejemplo: +593XXXXXXXXX.
  </small>


    <!-- Dirección de Facturación -->
    <div class="col-md-12">
      <h6 class="mb-0 h5">Términos y Condiciones de compra</h6>
      <div class="my-3 border-bottom"></div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="gridCheck" checked>
        <label class="form-check-label" for="gridCheck">He leido y acepto lo terminos y condiciones</label>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="col-md-6">
      <div class="d-grid">
        <a href="{% url 'saas_cart:cart_detail' %}" class="btn btn-light btn-ecomm"><i class='bx bx-chevron-left'></i>Back to Cart</a>
      </div>
    </div>

    <div class="col-md-6">
      <div class="d-grid">
        <input type="submit" value="{% trans 'Place order' %}" class="btn btn-primary btn-ecomm">
      </div>
    </div>
  </form>
</div>

												</div>
											</div>
										</div>
									</div>
								</div>
<div class="col-12 col-xl-4">
  <div class="order-summary">
    <div class="card">
      <div class="card-body">
        <!-- Aplicar código de descuento -->

        <!-- Resumen de la orden -->
     <div class="card">
  <div class="card-body">
    <p class="fs-5">Detalle de Compra</p>
    <div class="my-3 border-top"></div>
    
    <!-- Mostrar cada producto en el carrito -->
    <ul class="list-unstyled">
      {% for item in cart %}
        <li class="d-flex align-items-center">

          <div class="ps-3">
            <h6 class="mb-1">{{ item.product.name }}</h6>
            <p>{{item.product.description }}</p>
            <div class="widget-product-meta">
            </div>
          </div>
        </li>
        <div class="my-3 border-top"></div>
      {% endfor %}
    </ul>

    <!-- Mostrar descuento si aplica -->
    {% if cart.coupon %}
      <div class="d-flex justify-content-between">
        <span>{{ cart.coupon.code }} ({{ cart.coupon.discount }}% off)</span>
        <span>- ${{ cart.get_discount|floatformat:"2" }}</span>
      </div>
      <div class="my-3 border-top"></div>
    {% endif %}
    
    <!-- Totales -->


    {% if cart.coupon %}
      <div class="d-flex justify-content-between">
        <span>Discount</span>
        <span>- ${{ cart.get_discount|floatformat:"2" }}</span>
      </div>
    {% endif %}
    <div class="my-3 border-top"></div>
    <div class="d-flex justify-content-between">
      <h5 class="mb-0">Total a pagar</h5>
      <span class="float-end">${{ cart.get_total_price_after_discount|floatformat:"2" }}</span>
    </div>
  </div>
</div>

      </div>
    </div>


  </div>
</div>

							</div>
							<!--end row-->
						</div>
					</div>
        </div>
      </div>
				</section>
				<!--end shop cart-->
             

          </div>
          <!-- end page content-->
         </div>