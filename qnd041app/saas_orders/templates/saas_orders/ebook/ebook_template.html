{% load static %}
{% load qr_code %}
{% load humanize %}

<html lang="es">
  <head>
    <meta charset="utf-8">
    <link href="{% static 'css/report.css' %}" rel="stylesheet">
    <title>Pedido {{ order.id }}</title>
    <meta name="description" content="Detalle del pedido SaaS SmartQuail">
  </head>

  <body>
    <!-- Portada -->
    <article id="cover">
      <h1>Guía de Soluciones ERP - SmartQuail, Inc.</h1>
      <address>
        SmartQuail, Inc.<br>
        Quito, Ecuador
      </address>
      <address>
        contacto@smartquail.com<br>
        https://smartquail.com
      </address>
      
    </article>

    

    <!-- Tabla de contenidos -->
    <article id="contents">
      <h2>Contenido</h2>
      <ul>
        <li><a href="#cliente-title">1. Información del Cliente</a></li>
        <li><a href="#productos-title">2. Productos del Pedido</a></li>
        <li><a href="#totales-title">3. Totales y Descuentos</a></li>
        <li><a href="#terms-title">4. Términos y Condiciones</a></li>
        <li><a href="#sre-title">5. Descripción Técnica del Sistema de Respaldo de Empresas (SRE)</a></li>
      </ul>
    </article>



    <!-- Sección 1: Información del Cliente -->
    <article id="cliente">
      <h2 id="cliente-title">1. Información del Cliente</h2>
      <section>
        <p><strong>Nombre:</strong> {{ order.first_name }} {{ order.last_name }}</p>
        <p><strong>Email:</strong> {{ order.email }}</p>
        <p><strong>Teléfono:</strong> {{ order.telefono }}</p>
        <p><strong>R.U.C/C.I:</strong> {{ order.ruc }}</p>
        <p><strong>Razón Social:</strong> {{ order.razon_social }}</p>
        <p><strong>Sector de Negocios:</strong> {{ order.get_sector_display }}</p>
        <p><strong>Fecha de creación:</strong> {{ order.created|date:"d/m/Y H:i" }}</p>
        <p><strong>Estado de pago:</strong> {% if order.paid %}Pagado{% else %}Pendiente{% endif %}</p>
        <p><strong>Acepta términos:</strong> {% if order.terms_accepted %}Sí{% else %}No{% endif %}</p>
        <p><strong>Activo:</strong> {% if order.is_active %}Sí{% else %}No{% endif %}</p>
      </section>
    </article>

    <!-- Sección 2: Productos del pedido -->
    <article id="productos">
      <h2 id="productos-title">2. Productos del Pedido</h2>
      <section>
        {% if order.items.all %}
          <table border="1" cellpadding="5" cellspacing="0">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Precio unitario (USD)</th>
                <th>Cantidad</th>
                <th>Subtotal (USD)</th>
                <th>Utilidad bruta (USD)</th>
                <th>Valor deducible IVA (USD)</th>
                <th>Utilidad líquida (USD)</th>
              </tr>
            </thead>
            <tbody>
              {% for item in order.items.all %}
              <tr>
                <td>{{ item.product.name }}</td>
                <td>{{ item.price|floatformat:2 }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.get_cost|floatformat:2 }}</td>
                <td>{{ item.get_gross_profit|floatformat:2 }}</td>
                <td>{{ item.get_iva_deductible|floatformat:2 }}</td>
                <td>{{ item.get_net_profit|floatformat:2 }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No hay productos registrados en este pedido.</p>
        {% endif %}
      </section>
    </article>

    <!-- Sección 3: Totales y descuentos -->
    <article id="totales">
      <h2 id="totales-title">3. Totales y Descuentos</h2>
      <section>
        <p><strong>Total sin descuento:</strong> {{ order.get_total_cost|add:order.discount|floatformat:2 }} USD</p>
        <p><strong>Descuento aplicado:</strong> {{ order.discount }}%</p>
        <p><strong>Total con descuento:</strong> {{ order.get_total_cost|floatformat:2 }} USD</p>
        {% if order.coupon %}
          <p><strong>Cupón aplicado:</strong> {{ order.coupon.code }}</p>
        {% endif %}
      </section>
    </article>

    <!-- Sección 4: Términos y Condiciones -->
    <article id="terms">
      <h2 id="terms-title">4. Términos y Condiciones de Compra</h2>
      <section>
        <p>Los presentes <strong>Términos y Condiciones</strong> regulan la adquisición, desarrollo, implementación y uso de soluciones tecnológicas, software, servicios en la nube y consultoría especializada de <strong>SmartQuail, Inc.</strong> en Ecuador.</p>

        <h3>4.1 Proceso de compra</h3>
        <p>La compra se considera finalizada tras iniciar la fase de Investigación y Desarrollo (I+D). Antes de esto, el cliente puede solicitar la devolución total.</p>

        <h3>4.2 Servicios en la nube</h3>
        <p>El primer mes de uso es gratuito; luego, se aplican tarifas según plan contratado.</p>

        <h3>4.3 Desarrollo Open Source</h3>
        <p>El desarrollo se realiza sobre código abierto. Los proyectos se ejecutan según horas pactadas; si se requiere tiempo adicional, se generan costos adicionales acordados.</p>

        <h3>4.4 Protección de datos</h3>
        <p>SmartQuail cumple la Ley Orgánica de Protección de Datos Personales y los principios de privacidad y seguridad de la información.</p>
        <p>No se almacenan ni se tiene acceso directo a información sensible como tarjetas de crédito o contraseñas financieras.</p>

        <h3>4.5 Legislación aplicable</h3>
        <p>Estos términos se rigen por las leyes de Ecuador. Las controversias se resolverán en los tribunales del Distrito Metropolitano de Quito.</p>
      </section>
    </article>

    <!-- Sección 5: Descripción Técnica del SRE -->
    <article id="sre">
      <h2 id="sre-title">5. Descripción Técnica del Sistema de Respaldo de Empresas (SRE)</h2>
      <section>
        <p>El Sistema de Respaldo de Empresas (SRE) es una solución integral que asegura la continuidad de los procesos empresariales críticos a través de la creación y gestión de copias de seguridad (backups) de los datos más relevantes de la empresa. Este sistema permite prevenir pérdidas de datos por fallas tecnológicas, desastres naturales o incidentes de seguridad.</p>

        <h3>Componentes Clave del SRE</h3>
        <ul>
          <li><strong>Almacenamiento Seguro:</strong> El SRE emplea almacenamiento redundante en la nube para garantizar la disponibilidad continua de las copias de seguridad. Utiliza tecnologías avanzadas como encriptación de extremo a extremo para proteger la información.</li>
          <li><strong>Automatización de Backups:</strong> El sistema permite la programación automática de copias de seguridad periódicas según las necesidades de la empresa, sin intervención manual.</li>
          <li><strong>Recuperación Rápida:</strong> El SRE optimiza la recuperación de datos para minimizar tiempos de inactividad en situaciones de pérdida de información.</li>
          <li><strong>Monitoreo y Notificaciones:</strong> A través de paneles de control y alertas automáticas, los administradores del sistema pueden recibir notificaciones sobre el estado de los backups, evitando riesgos de fallas en el proceso.</li>
          <li><strong>Escalabilidad:</strong> El SRE se adapta al crecimiento de la empresa, permitiendo aumentar la capacidad de almacenamiento sin complicaciones.</li>
        </ul>

        <h3>Beneficios del SRE</h3>
        <ul>
          <li><strong>Seguridad:</strong> Protección de datos sensibles mediante cifrado de alta calidad.</li>
          <li><strong>Reducción de Riesgos:</strong> Prevención de pérdida de datos críticos debido a desastres o fallas del sistema.</li>
          <li><strong>Rendimiento:</strong> Minimización de la interrupción de las operaciones comerciales, permitiendo una rápida recuperación de información.</li>
          <li><strong>Conformidad:</strong> Cumplimiento de normativas de protección de datos, asegurando que las empresas puedan operar con confianza.</li>
        </ul>

        <p>El SRE es una herramienta esencial para empresas que buscan mantener la integridad de sus datos y la continuidad operativa, especialmente en sectores que dependen de la información para sus procesos de negocio.</p>
      </section>
    </article>


  </body>
</html>
