{% load static %}
{% load qr_code %}
{% load humanize %}

<html>
<head>
  <link href="{% static 'css/pdf.css' %}" media="print" rel="stylesheet">
  <title>00000{{ order.id }}</title>
  <meta name="description" content="Invoice demo sample">
</head>

<body>
  <!-- Encabezado -->
  <div style="background-color:#000;">
    <img src="{% static 'img/logoSQ_responsive.png' %}" style="display:inline-flex;" align="left" width="50%">
  </div>

  <!-- Datos del proveedor -->
  <aside>
    <address id="from">
      C.O.T: Ms. Silva Mauricio<br>
      SMARTQUAIL S.A.S<br>
      info@smartquail.io<br>
      R.U.C: 1793206532001
    </address>

    <!-- Datos del cliente -->
    <address id="to">
      C.O: {{ order.first_name }} {{ order.last_name }}<br>
      {{ order.razon_social }}<br>
      {{ order.email }}<br>
      R.U.C: {{ order.ruc }}
    </address>
  </aside>

  <!-- Información general -->
  <dl id="informations" style="display:inline-block;">
    <dt>Fecha</dt>
    <dd>{{ order.created|date:"M d, Y" }}</dd>

    <dt>Cotización</dt>
    <dd>00000{{ order.id }}</dd>

    <dt>Sector</dt>
    <dd>{{ order.get_sector_display }}</dd>
  </dl>

  {% if order.project_name %}
    <h4>{{ order.project_name }}</h4>
  {% endif %}

  <!-- Detalle de productos -->
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Item</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item in order.items.all %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td style="text-align: left;">{{ item.product.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>${{ item.price|floatformat:2 }}</td>
          <td>${{ item.get_cost|floatformat:2 }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Totales y estado -->
  <table id="total">
    <thead>
      <tr>
        <th style="background:#f6f6f6; color:#000; text-align:left;">Valores a pagar</th>
        <th style="background:#f6f6f6; color:#000; text-align:left;">Información bancaria</th>
        <th style="background:#f6f6f6; color:#000; text-align:left;">Estado de Cotización</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Sub Total: ${{ order.subtotal|floatformat:2 }}</td>
        <td style="text-align:left;">Banco Internacional</td>
        <td>Estado: {% if order.aprobado %}Aprobado{% else %}No aprobado{% endif %}</td>
      </tr>
      <tr>
        <td>I.V.A (12%): ${{ order.tax_subtotal|floatformat:2 }}</td>
        <td style="text-align:left;">C.T.A: 708011138</td>
        <td>Válido hasta: {{ order.expire|date:"M d, Y" }}</td>
      </tr>
      <tr>
        <td>Total: ${{ order.total|floatformat:2 }}</td>
        <td style="text-align:left;">Cuenta de Ahorros</td>
        <td>Última actualización: {{ order.updated|date:"M d, Y" }}</td>
      </tr>
      <tr>
        <td>Anticipo: ${{ order.anticipo|floatformat:2 }}</td>
        <td style="text-align:left;">Profix Group</td>
        <td>Tiempo de implementación: 30 días</td>
      </tr>
      <tr>
        <td colspan="3" style="font-size:12px; font-weight:bold; color:#b60202;">
          Valor a cancelar: ${{ order.total|floatformat:2 }} / Mes
        </td>
      </tr>
    </tbody>
  </table>
</body>
</html>
