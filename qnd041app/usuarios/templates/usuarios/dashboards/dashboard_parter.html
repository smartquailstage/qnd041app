{% extends "base_dash_parther.html" %}
{% load widget_tweaks %}
{% load static %}

{% block title %}Aplicativo para la administraci贸n de gesti贸n de informaci贸n cultural{% endblock %}

{% block content %}

<div class="page-content-wrapper">
  <!-- start page content-->
  <div class="page-content">

  {% if all_projects or projects_in_progress %}

<div class="card radius-10">
  <div class="card-body">

    {# ================= PROYECTOS COMPLETADOS ================= #}
    {% for project in all_projects %}
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-4 mb-4">

      <!--  Estado del Proyecto -->
      <div class="col">
        <div class="card radius-10 bg-primary">
          <div class="card-body">
            <p class="mb-1 text-white">{{ project.name }}</p>
            <h4 class="mb-0 text-white">Activo</h4>
            <hr class="text-white">
            <p class="mb-0 text-white">
              <strong>Progreso:</strong> {{ project.progress }}%
            </p>
            <div class="progress my-0" style="height:6px;">
              <div class="progress-bar bg-success"
                   style="width: {{ project.progress }}%"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
    {% endfor %}

    {# ================= PROYECTOS EN PROGRESO ================= #}
    {% for project in projects_in_progress %}
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-4 mb-4">

      <div class="col">
        <div class="card radius-10 bg-primary">
          <div class="card-body">
            <p class="mb-1 text-white">{{ project.name }}</p>
            <h4 class="mb-0 text-white">En Progreso</h4>
            <hr class="text-white">
            <p class="mb-0 text-white">
              <strong>Progreso:</strong> {{ project.progress }}%
            </p>
            <div class="progress mb-3" style="height:7px;">
              <div class="progress-bar bg-warning"
                   style="width: {{ project.progress }}%"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
    {% endfor %}

  </div>
</div>

{% endif %}
  <hr>
    <div class="col-md-8">
    <h2 class="display-4 mt-3"><ion-icon name="cloud-upload-outline"></ion-icon> Soluciones Negocios ITC</h2>
    <p>Ingresa a cada opci贸n para explorar las demostraciones y conocer en detalle la metodolog铆a que utilizamos para dise帽ar e implementar soluciones personalizadas para tu proyecto o negocio. </p>
   <p>Si deseas acceder a opciones avanzadas, ingresa a tu <a href="{% url 'usuarios:editar_perfil' %}"><ion-icon name="person-circle-outline"></ion-icon> perfil de usuario</a>  y aseg煤rate de configurar o actualizar el tama帽o de tu empresa, para habilitar m谩s funcionalidades.</p>
  
  </div> 
  </div>


  
    <div class="card radius-10">
      <div class="card-body">
<div class="row row-cols-1 row-cols-lg-3">

<a href="{% url 'saas_shop:product_list' %}">
            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                    <ion-icon name="browsers-outline"></ion-icon>
                   </div>
                   <h5>Software</h5>
                   <p class="mb-0">
                   Potentes sistemas de Planificaci贸n de Recursos Empresariales (ERP) y avanzadas plataformas de Gesti贸n de Contenidos y 
                   Relaciones con Clientes (CRM).
                   </p>
                </div>
              </div>
            </div>
</a>

<a href="{% url 'saas_shop:product_list' %}">

            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                   <ion-icon name="grid-outline"></ion-icon>
                   </div>
                   <h5>Plataformas </h5>
                   <p class="mb-0">
                    Obt茅n la Suite completa (ERP + CRM + WebApp) y transforma tus procesos reales de negocio en una experiencia de usuario s贸lida, integrada y altamente atractiva para tus clientes.
                   </p>
                </div>
              </div>
            </div>
</a>

<a href="{% url 'saas_shop:product_list' %}">
            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                    <ion-icon name="cube-outline"></ion-icon>
                   </div>
                   <h5>Infraestructura</h5>
                   <p class="mb-0">
                    Adquiere independencia y soberan铆a digital con tu propia infraestructura en la nube, totalmente configurada para gestionar tus procesos sin depender de servidores p煤blicos dedicados.
                    </p>
                </div>
              </div>
            </div>
</a>


         </div>
  <hr>
  <div class="col-md-8">
    <h2 class="display-4 mt-3"><ion-icon name="document-text-outline"></ion-icon> Documentaci贸n ITC </h2>
    <p>Accede a la documentaci贸n especializada sobre Negocios Inteligentes ITC, con informaci贸n relevante para Ecuador y mercados internacionales. Consulta adem谩s la documentaci贸n t茅cnica y funcional de todas  soluciones tecnol贸gicas de SmartQuail, Inc., disponible desde la plataforma.</p>
  </div>


<div class="row row-cols-1 row-cols-lg-3 g-4">

  {% for noticia in noticias|slice:":3" %}
  <div class="col">

    <div class="card radius-10 h-100 position-relative overflow-hidden">

      <!-- Imagen -->
      {% if noticia.imagen_portada %}
        <a href="{% url 'business_customer_projects:detalle' noticia.pk %}">
          <img src="{{ noticia.imagen_portada.url }}"
               class="img-fluid radius-10 w-100"
               style="object-fit: cover; min-height: 260px;"
               alt="{{ noticia.titulo_1 }}">
        </a>
      {% else %}
        <img src="{% static 'assets/images/placeholder.png' %}"
             class="img-fluid radius-10 w-100"
             style="object-fit: cover; min-height: 260px;"
             alt="Sin imagen">
      {% endif %}

      <!-- Overlay -->
      <a href="{% url 'business_customer_projects:detalle' noticia.pk %}">
        <div class="position-absolute top-50 start-0 translate-middle-y
                    text-white p-4 w-100"
             style="background: linear-gradient(to top, rgba(0,0,0,.75), rgba(0,0,0,.2));">

          <h5 class="card-title mb-2">
            {{ noticia.titulo_1 }}
          </h5>

          <p class="mb-1" style="font-size: 11px;">
            {{ noticia.fecha_publicacion|date:"d M Y" }} 路 {{ noticia.autor_nombre }}
          </p>

          {% if noticia.categoria %}
            <p class="mb-1 text-uppercase" style="font-size: 11px;">
              {{ noticia.categoria }}
            </p>
          {% endif %}

          {% if noticia.cuerpo_1 %}
            <p class="card-text mt-2">
              {{ noticia.cuerpo_1|truncatewords:20 }}
            </p>
          {% endif %}

        </div>
      </a>

    </div>
  </div>
  {% empty %}
    <div class="col-12 text-center">
      <p>No hay noticias disponibles en este momento.</p>
    </div>
  {% endfor %}

</div>
  <hr>

      </div>
    </div>


  </div>
  <!-- end page content-->
</div>



<script>
document.addEventListener("DOMContentLoaded", function () {

    function typeWriterEffect(elementId, text, speed) {
        let index = 0;
        function type() {
            if (index < text.length) {
                document.getElementById(elementId).innerHTML += text.charAt(index);
                index++;
                setTimeout(type, speed);
            }
        }
        type();
    }

   
    const text_start = `Hola, {{ request.user.first_name }}, gracias por confiar en SmartQuail, Inc.
Tu proyecto de Tecnolog铆as de Informaci贸n y Comunicaci贸n en la nube ya est谩 disponible y en producci贸n. Todos los recursos de nube que contrataste han sido correctamente alojados y distribuidos en nuestros servidores.

Si deseas escalar alg煤n proyecto, simplemente actualiza las opciones de usuario en tu perfil. Autom谩ticamente te mostraremos todos los productos disponibles y alineados a tus necesidades.`;
    typeWriterEffect("typewriter", text_start, 35);


});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const btnCambiarFoto = document.getElementById("btnCambiarFoto");
    const inputPhoto = document.getElementById("id_photo");
    const previewImg = document.querySelector(".user-change-photo img");

    btnCambiarFoto.addEventListener("click", function () {
        inputPhoto.click();
    });

    inputPhoto.addEventListener("change", function (e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
                previewImg.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
});
</script>

 
{% endblock %}