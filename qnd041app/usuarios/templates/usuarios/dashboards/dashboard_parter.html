{% extends "base_dash_parther.html" %}
{% load widget_tweaks %}
{% load static %}

{% block title %}Aplicativo para la administraci√≥n de gesti√≥n de informaci√≥n cultural{% endblock %}

{% block content %}

<div class="page-content-wrapper">
  <!-- start page content-->
  <div class="page-content">

  <div class="col-md-8">
    <h2 class="display-4 mt-3"><ion-icon name="cloud-download-outline"></ion-icon> Proyectos de Negocios ITC </h2>

  </div>
  
    <div class="card radius-10">
      <div class="card-body">

{% if all_projects or projects_in_progress %}

    {% for project in all_projects %}
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-4 mb-4">

        <!-- üîµ 1 ‚Äî Estado del Proyecto -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white"> Meddes¬Æ (I+D)+A</p>
                            <h4 class="mb-0 text-white">Activo</h4>
                            <p class="mb-1 text-white"> <ion-icon name="shield-checkmark-sharp"></ion-icon> app.meddes.com.ec </p>
                        </div>
                        <div class="ms-auto text-white fs-2">
                            <button class="btn btn-primary" type="button" disabled=""> 
                              <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                    <span class="visually-hidden">Loading...</span>
                  </button>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Progreso:</strong> {{ project.progress }}% (Producci√≥n)</p>
                    <div class="progress my-0" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ project.progress }}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                </div>
            </div>
        </div>

        <!-- üü£ 2 ‚Äî Uso de Recursos Cloud -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Latencia Max (100 usuarios)</p>
                            <h4 class="mb-0 text-white">814 ms </h4>
                            <p class="mb-1 text-white"> <ion-icon name="checkmark-done-outline"></ion-icon> √∫ltima revision: 07/11/25 </p>
                        </div>
                        <div class="ms-auto text-white fs-2">
                            <ion-icon name="wifi-outline"></ion-icon>
                        </div>
                    </div>
                    <hr class="text-white">
                                        <p class="mb-0 text-white"><strong>Uso de recursos:</strong> 30% (1000 Mbs/sec)</p>
                    <div class="progress my-0" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                </div>
            </div>
        </div>

        <!-- üü¢ 3 ‚Äî Seguridad y Monitoreo -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Almacenamiento  <ion-icon name="shield-checkmark-sharp"></ion-icon> </p>
                            <h4 class="mb-0 text-white">25 GB </h4>
                               <p class="mb-1 text-white"> <ion-icon name="sync-outline"></ion-icon> Respaldo: 2:00 am / 24hs</p>
                        </div>
                        <div class="ms-auto text-white fs-2">
                           <ion-icon name="server-outline"></ion-icon>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Uso de recurso Bucket:</strong> 5% (5 GB)</p>
                    <div class="progress my-0" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 5%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                </div>
            </div>
        </div>

        <!-- ‚ö´ 4 ‚Äî Estado de Pago -->
          <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Unidad de Procesamiento (vCPU) </p>
                            <h4 class="mb-0 text-white">1000m </h4>
                               <p class="mb-1 text-white"><ion-icon name="cloud-upload-outline"></ion-icon> Servidor P√∫blico Dedicado</p>
                        </div>
                        <div class="ms-auto text-white fs-2">
                           <ion-icon name="hardware-chip-outline"></ion-icon>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Uso de recurso vCPU:</strong> 95% (978m)</p>
                    <div class="progress my-0" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 95%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                </div>
            </div>
        </div>

    </div>
    {% endfor %}

    {% for project in projects_in_progress %}
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-4 mb-4">

        <!-- üîµ 1 ‚Äî Estado del Proyecto -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">{{ project.name }}</p>
                            <h4 class="mb-0 text-white">En Progreso</h4>
                             <p class="mb-1 text-white">qnd031app.smartquail.io</p>
                        </div>
                        <div class="ms-auto text-warning fs-2">
                           <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span></span>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Progreso:</strong> {{ project.progress }}% (Desarollo)</p>
                    <div class="progress mb-3" style="height:7px;">
									<div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress }}%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
                </div>
            </div>
        </div>

        <!-- üü£ 2 ‚Äî Cloud -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Calculando Latencia</p>
                            <h4 class="mb-0 text-white">En Pruebas QA</h4>
                             <p class="mb-1 text-white">Preparando Balanceador de carga</p>
                        </div>
                        <div class="ms-auto text-warning fs-2">
                           <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span></span>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Progreso:</strong> {{ project.progress }}% (Geolocalizando)</p>
                    <div class="progress mb-3" style="height:7px;">
									<div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress }}%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
                </div>
            </div>
        </div>

        <!-- üü¢ 3 ‚Äî Seguridad -->
        <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Alojando Base de datos</p>
                            <h4 class="mb-0 text-white">En Implementaci√≥n</h4>
                             <p class="mb-1 text-white">Arbol de Datos</p>
                        </div>
                        <div class="ms-auto text-warning fs-2">
                           <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span></span>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Progreso:</strong> {{ project.progress }}% (Desarollo)</p>
                    <div class="progress mb-3" style="height:7px;">
									<div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress }}%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
                </div>
            </div>
        </div>

        <!-- ‚ö´ 4 ‚Äî Estado de Pago -->
                <div class="col">
            <div class="card radius-10 bg-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div>
                            <p class="mb-1 text-white">Buscando Servidores Disponibles</p>
                            <h4 class="mb-0 text-white">En Pruebas QA</h4>
                             <p class="mb-1 text-white">Optimizaci√≥n de Recursos</p>
                        </div>
                        <div class="ms-auto text-warning fs-2">
                           <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span></span>
                        </div>
                    </div>
                    <hr class="text-white">
                    <p class="mb-0 text-white"><strong>Progreso:</strong> {{ project.progress }}% (Desarollo)</p>
                    <div class="progress mb-3" style="height:7px;">
									<div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress }}%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

{% else %}

    <!-- SIN PROYECTOS -->
    <div class="alert alert-warning text-center">
        No tienes proyectos creados.
        <br>
        <a href="{% url 'business_customer_projects:create_project' %}" class="btn btn-primary mt-2">
            Crear Proyecto
        </a>
    </div>

{% endif %}


      </div>
    </div>

    <div class="col-md-8">
    <h2 class="display-4 mt-3"> <ion-icon name="cloud-upload-outline"></ion-icon> Soluciones para Negocios ITC</h2>
  </div>
  
    <div class="card radius-10">
      <div class="card-body">
<div class="row row-cols-1 row-cols-lg-3">

<a href="{% url 'saas_shop:product_list' %}">
            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                    <ion-icon name="browsers-outline"></ion-icon>
                   </div>
                   <h5>Software</h5>
                   <p class="mb-0">
                   Potentes sistemas de Planificaci√≥n de Recursos Empresariales (ERP) y avanzadas plataformas de Gesti√≥n de Contenidos y 
                   Relaciones con Clientes (CRM).
                   </p>
                </div>
              </div>
            </div>
</a>

<a href="{% url 'saas_shop:product_list' %}">

            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                   <ion-icon name="grid-outline"></ion-icon>
                   </div>
                   <h5>Plataformas </h5>
                   <p class="mb-0">
                    Obt√©n la Suite completa (ERP + CRM + WebApp) y transforma tus procesos reales de negocio en una experiencia de usuario s√≥lida, integrada y altamente atractiva para tus clientes.
                   </p>
                </div>
              </div>
            </div>
</a>

<a href="{% url 'saas_shop:product_list' %}">
            <div class="col">
              <div class="card radius-10 bg-primary">
                <div class="card-body text-white">
                   <div class="service-box bg-white text-primary">
                    <ion-icon name="cube-outline"></ion-icon>
                   </div>
                   <h5>Infraestructura</h5>
                   <p class="mb-0">
                    Adquiere independencia y soberan√≠a digital con tu propia infraestructura en la nube, totalmente configurada para gestionar tus procesos sin depender de servidores p√∫blicos dedicados.
                    </p>
                </div>
              </div>
            </div>
</a>


         </div>

  <div class="col-md-8">
    <h2 class="display-4 mt-3"><ion-icon name="bulb-outline"></ion-icon> Ideas de Negocios ITC </h2>
  </div>

<div class="row row-cols-1 row-cols-lg-3 g-4">

  {% for noticia in noticias|slice:":3" %}
  <div class="col">

    <div class="card radius-10 h-100 position-relative overflow-hidden">

      <!-- Imagen -->
      {% if noticia.imagen_portada %}
        <a href="{% url 'business_customer_projects:detalle' noticia.pk %}">
          <img src="{{ noticia.imagen_portada.url }}"
               class="img-fluid radius-10 w-100"
               style="object-fit: cover; min-height: 260px;"
               alt="{{ noticia.titulo_1 }}">
        </a>
      {% else %}
        <img src="{% static 'assets/images/placeholder.png' %}"
             class="img-fluid radius-10 w-100"
             style="object-fit: cover; min-height: 260px;"
             alt="Sin imagen">
      {% endif %}

      <!-- Overlay -->
      <a href="{% url 'business_customer_projects:detalle' noticia.pk %}">
        <div class="position-absolute top-50 start-0 translate-middle-y
                    text-white p-4 w-100"
             style="background: linear-gradient(to top, rgba(0,0,0,.75), rgba(0,0,0,.2));">

          <h5 class="card-title mb-2">
            {{ noticia.titulo_1 }}
          </h5>

          <p class="mb-1" style="font-size: 11px;">
            {{ noticia.fecha_publicacion|date:"d M Y" }} ¬∑ {{ noticia.autor_nombre }}
          </p>

          {% if noticia.categoria %}
            <p class="mb-1 text-uppercase" style="font-size: 11px;">
              {{ noticia.categoria }}
            </p>
          {% endif %}

          {% if noticia.cuerpo_1 %}
            <p class="card-text mt-2">
              {{ noticia.cuerpo_1|truncatewords:20 }}
            </p>
          {% endif %}

        </div>
      </a>

    </div>
  </div>
  {% empty %}
    <div class="col-12 text-center">
      <p>No hay noticias disponibles en este momento.</p>
    </div>
  {% endfor %}

</div>

      </div>
    </div>


  </div>
  <!-- end page content-->
</div>



<script>
document.addEventListener("DOMContentLoaded", function () {

    function typeWriterEffect(elementId, text, speed) {
        let index = 0;
        function type() {
            if (index < text.length) {
                document.getElementById(elementId).innerHTML += text.charAt(index);
                index++;
                setTimeout(type, speed);
            }
        }
        type();
    }

   
    const text_start = `Hola, {{ request.user.first_name }}, gracias por confiar en SmartQuail, Inc.
Tu proyecto de Tecnolog√≠as de Informaci√≥n y Comunicaci√≥n en la nube ya est√° disponible y en producci√≥n. Todos los recursos de nube que contrataste han sido correctamente alojados y distribuidos en nuestros servidores.

Si deseas escalar alg√∫n proyecto, simplemente actualiza las opciones de usuario en tu perfil. Autom√°ticamente te mostraremos todos los productos disponibles y alineados a tus necesidades.`;
    typeWriterEffect("typewriter", text_start, 35);


});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const btnCambiarFoto = document.getElementById("btnCambiarFoto");
    const inputPhoto = document.getElementById("id_photo");
    const previewImg = document.querySelector(".user-change-photo img");

    btnCambiarFoto.addEventListener("click", function () {
        inputPhoto.click();
    });

    inputPhoto.addEventListener("change", function (e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
                previewImg.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
});
</script>

 
{% endblock %}