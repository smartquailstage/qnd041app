<div class="@container px-4 pb-4 grow">

    <div class="bg-white block flex flex-col grow overflow-hidden p-6 relative rounded-default shadow-xs dark:bg-base-900 dark:border-base-800 border border-base-200  ">



<div class="grow relative">
    
                <div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark">
    Efectivo en Bancos: $1,234,567.89
</div>

                <p class="leading-relaxed mb-0 text-sm">
    
                    Total spending between 1 - 31 October. Increase +3.14% comparing to previous month 1 - 30 September.
                
</p>


           


            

    

    
</div>


</div>

 <div class="{% if card_included == 1 %}-m-6{% else %} bg-white flex flex-col grow lg:border lg:border-base-200 lg:overflow-hidden lg:rounded-default lg:shadow-xs{% endif %} lg:dark:border-base-800 dark:bg-base-900">
        <div {% if height %}style="max-height: {{ height }}px;" data-simplebar{% endif %}>

<div class="bg-white dark:bg-base-900 border border-base-200 rounded-default shadow-xs p-6">



    {% if cards %}
        <div class="flex flex-col gap-6 lg:flex-row">
            {% for card in cards %}
                <div class="block flex flex-col grow overflow-hidden p-6 relative rounded-default shadow-xs
                            border border-base-200 lg:w-1/3
                            {% if card.badge_color == 'success' %}
                                bg-green-50 dark:bg-green-900
                            {% elif card.badge_color == 'warning' %}
                                bg-yellow-50 dark:bg-yellow-900
                            {% elif card.badge_color == 'secondary' %}
                                bg-gray-50 dark:bg-gray-900
                            {% else %}
                                bg-white dark:bg-base-900
                            {% endif %}">
                    <div class="grow relative">
                        <p class="leading-relaxed mb-0 text-sm">{{ card.title }} </p>
                        <div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark">
                            {{ card.value }} 
                        </div>

                        {% if card.badge %}
                            <div class="absolute right-0 top-0">
                                <span class="inline-block font-semibold h-6 leading-6 px-2 rounded-default
                                    text-[11px] uppercase whitespace-nowrap
                                    {% if card.badge_color == 'success' %}
                                       bg-primary-100 text-green-700 dark:bg-green-500/20 dark:text-green-400
                                    {% elif card.badge_color == 'warning' %}
                                       bg-yellow-100 text-yellow-700 dark:bg-yellow-500/20 dark:text-yellow-400
                                    {% else %}
                                       bg-blue-100 text-blue-700 dark:bg-primary-500/20 dark:text-primary-400
                                    {% endif %}">
                                    
                                    {% if card.badge_color == 'success' %}
                                        <span class="material-symbols-outlined">arrow_circle_up</span>
                                    {% elif card.badge_color == 'warning' %}
                                        <span class="material-symbols-outlined">arrow_circle_down</span>
                                    {% endif %}
                                    
                                    {{ card.badge }}
                                </span>
                            </div>
                        {% endif %}

                    </div>

                    {% if card.footer %}
                        <div class="border-t border-base-200 flex items-center -mb-6 -mx-6 mt-6
                                    pb-2 pt-2 px-6 text-sm dark:border-base-800">
                            <span>{{ card.footer }}</span>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% endif %}

</div>

<div class="bg-white dark:bg-base-900 border border-base-200 rounded-default shadow-xs p-6">
  <div class="flex flex-col gap-6 lg:flex-row">
        
            <div class="flex flex-col gap-6 lg:w-1/2">
                
                    <div class="bg-white block flex flex-col grow overflow-hidden p-6 relative rounded-default shadow-xs dark:bg-base-900 dark:border-base-800 border border-base-200  ">



<div class="grow relative">

                              <div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark text-base">
    
                        Distrubución Financiera
                    
</div>
    
 <p class="leading-relaxed mb-0 text-sm">
    <span class="font-semibold" style="color: #6FCF97;">Ingresos</span>/
    <span class="font-semibold" style="color: #F2C94C;">Egresos</span>/
    <span class="font-semibold" style="color: #3581ce;">Utilidad Neta</span>
</p>

                        <div class="relative w-full">
   <img src="{{ chart_image }}" alt="Ingresos vs Egresos" class="w-full h-auto rounded-default shadow-xs"/>
</div>


  <div class="bg-base-200 dark:bg-base-800 dark:border-base-800 h-px my-6"></div>



             <div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark text-base">
    
                        Dinámica Financiera (Engresos vs Ingresos)
                    
</div>


                        <div class="relative w-full">
<img src="{{ scatter_chart_image }}" alt="Gráfico de Dispersión" class="w-full h-auto" />
                    


             <div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark text-base">
    
                        Partes por 100 (Engresos - Ingresos)
                    
</div>
                    
     <div class="relative w-full">
            <img src="{{ pie_chart_image }}" alt="Gráfico de Dispersión" class="w-full h-auto" />
        </div>
    

    
</div>
</div>

                
     

                
            </div>
        
</div>

        <div class="bg-white block flex flex-col grow overflow-hidden p-6 relative rounded-default shadow-xs dark:bg-base-900 dark:border-base-800 border border-base-200   lg:w-1/2">


    <div class="border-b border-base-200 flex flex-row items-center mb-6 -mt-6 -mx-6 py-4 px-6 dark:border-base-800">
       <a href="smartbusinessanalytics_id:pdf_reporte_financiero"> 
<h2 class="font-semibold text-[15px] text-important flex items-center gap-3">
    <span class="material-symbols-outlined">download</span>
    Estado de Resultados

    <span class="px-2 py-0.5 rounded bg-gray-100 text-gray-600 text-xs">
        {% for h in header_stats %}
            {% if h.title == "Fecha de inicio" %}
                {{ h.value|date:"d M Y" }}
            {% endif %}
        {% endfor %}
        →
        {% for h in header_stats %}
            {% if h.title == "Fecha de fin" %}
                {{ h.value|date:"d M Y" }}
            {% endif %}
        {% endfor %}
    </span>
</h2>

        </a>

        
    </div>


<div class="grow relative">

    <!-- Punto de equilibrio -->
<div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark mb-2">
{% for h in header_stats %}
    {% if h.title == "Total Ingresos" %}
        {{ h.title }}: ${{ h.value.amount|floatformat:2 }}
    {% endif %}
{% endfor %}

</div>


    <!-- Texto descriptivo -->
    <p class="leading-relaxed mb-0 text-sm">
        Total revenue between 
        <strong class="font-semibold text-font-important-light dark:text-font-important-dark dark:text-white">
            {{ estado.fecha_inicio }} - {{ estado.fecha_fin }}
        </strong>. Increase 
        <span class="text-green-700 font-semibold dark:text-green-400">
            {% if flujo_financiero.ingresos_pct %}+{{ flujo_financiero.ingresos_pct|floatformat:2 }}%{% else %}0.00%{% endif %}
        </span> comparing to previous month 
        <strong class="font-semibold text-font-important-light dark:text-font-important-dark dark:text-white">
            {{ fecha_prev_inicio }} - {{ fecha_prev_fin }}
        </strong>.
    </p>

    <div class="bg-base-200 dark:bg-base-800 dark:border-base-800 h-px my-6"></div>

    <!-- Bloques de gastos y cuentas -->
    <div class="flex flex-col gap-5">


{% for ingreso in ingresos_corrientes %}
<div class="flex flex-col gap-2 relative w-full">

    <div class="flex flex-row relative z-20">
        <h3 class="text-font-important-light dark:text-font-important-dark text-sm">
            {{ ingreso.title }}
            {% if ingreso.porcentaje_ingresos %}
                ({{ ingreso.porcentaje_ingresos }}%)
            {% endif %}
        </h3>

        <strong class="bg-green-100 font-medium text-green-700 ml-auto px-1.5 py-1 rounded-default text-xs dark:text-font-important-light dark:bg-green-100">
            ${{ ingreso.value.amount|floatformat:2 }}
        </strong>
    </div>

    <div class="bg-base-100 flex flex-row overflow-hidden rounded-default dark:bg-base-800">
        <div
            class="h-1.5 rounded-default z-10 last:rounded-r-default"
            title="{{ ingreso.title }}"
            style="
                width: {{ ingreso.porcentaje_ingresos|default:0 }}%;
                background-color:
                    {% if ingreso.porcentaje_ingresos > 100 %}
                        #10B981   /* verde */
                    {% elif ingreso.porcentaje_ingresos >= 30 %}
                        #FBBF24   /* amarillo */
                    {% else %}
                        #EF4444   /* rojo */
                    {% endif %};
            ">
        </div>
    </div>

</div>
{% endfor %}


<div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark text-base">
     <div class="bg-base-200 dark:bg-base-800 dark:border-base-800 h-px my-6"></div>

     


                    
</div>


<div class="font-semibold text-2xl text-font-important-light tracking-tight dark:text-font-important-dark mb-2">
    {% for h in header_stats %}
        {% if h.title == "Total Egresos" %}
            {{ h.title }}(100%): {{ h.value }} 
        {% endif %}
    {% endfor %}
</div>

{% for gasto in gastos %}




<div class="flex flex-col gap-2 relative w-full">

    <div class="flex flex-row relative z-20">
        <h3 class="text-font-important-light dark:text-font-important-dark text-sm">
            {{ gasto.title }}
            {% if gasto.porcentaje_gasto %}
                ({{ gasto.porcentaje_gasto }}%)
            {% endif %}
        </h3>

        <strong class="bg-green-100 font-medium text-green-700 ml-auto px-1.5 py-1 rounded-default text-xs dark:text-font-important-light dark:bg-green-100">
            ${{ gasto.value.amount|floatformat:2 }}
        </strong>
    </div>

    <div class="bg-base-100 flex flex-row overflow-hidden rounded-default dark:bg-base-800">
        <div
            class="h-1.5 rounded-default z-10 last:rounded-r-default"
            title="{{ gasto.title }}"
            style="
                width: {{ gasto.porcentaje_gasto|default:0 }}%;
                background-color:
                    {% if gasto.porcentaje_gasto > 100 %}
                        #10B981   /* verde */
                    {% elif gasto.porcentaje_gasto >= 30 %}
                        #FBBF24   /* amarillo */
                    {% else %}
                        #EF4444   /* rojo */
                    {% endif %};
            ">
        </div>
    </div>

</div>
{% endfor %}








        <!-- Gráfico de pie -->
   

    </div>




    
</div>



</div>

    </div>
</div>

</div>

</div>
</div>